
<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Scoreboard</title>
</head>
<body>

<h2>Scoreboard - <span th:text="${difficulty}"></span></h2>

<!-- Difficulty selection -->
<form th:action="@{/trivia/scoreboard}" method="get">
    <label for="difficulty">Difficulty:</label>
    <select name="difficulty" id="difficulty">
        <option th:each="diff : ${T(demo.game.Difficulty).values()}"
                th:value="${diff}"
                th:text="${diff}"
                th:selected="${diff == difficulty}"></option>
    </select>
    <button type="submit">Filter</button>
</form>

<table border="1">
    <thead>
    <tr>
        <th>Rank</th>
        <th>Player</th>
        <th>Score</th>
        <th>Time (seconds)</th>
        <th>Finished At</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="result, iterStat : ${results}">
        <td th:text="${iterStat.index + 1}"></td>
        <td th:text="${result.player.username}"></td>
        <td th:text="${result.correctAnswers + '/' + result.totalQuestions}"></td>
        <td th:text="${result.durationMs / 1000}"></td>
        <td th:text="${result.finishedAt != null ? #temporals.format(result.finishedAt, 'yyyy-MM-dd HH:mm') : ''}"></td>
    </tr>
    </tbody>
</table>

<div>
    <a th:if="${results.hasPrevious()}"
       th:href="@{/trivia/scoreboard(difficulty=${difficulty}, page=${results.number - 1})}">
        Previous
    </a>

    <!-- âœ… Single ${} for pagination text -->
    <span th:text="${(results.number + 1) + ' / ' + results.totalPages}"></span>

    <a th:if="${results.hasNext()}"
       th:href="@{/trivia/scoreboard(difficulty=${difficulty}, page=${results.number + 1})}">
        Next
    </a>
</div>

<a th:href="@{/trivia}">Home</a>

</body>
</html>
